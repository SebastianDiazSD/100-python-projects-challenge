<!-- templates/index.html -->
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Library - Mi Colecci√≥n de Libros</title>
  <style>
    body { font-family: 'Segoe UI', sans-serif; padding: 20px; background: #f9f9f9; color: #333; }
    h1 { color: #0066cc; }
    table { width: 100%; border-collapse: collapse; margin: 20px 0; }
    th, td { padding: 12px; text-align: left; border-bottom: 1px solid #ddd; }
    th { background-color: #0066cc; color: white; }
    tr:hover { background-color: #f1f1f1; }
    .btn {
      padding: 8px 16px; margin: 5px; border: none; border-radius: 4px;
      cursor: pointer; font-weight: bold;
    }
    .btn-edit { background: #ffc107; color: black; }
    .btn-delete { background: #dc3545; color: white; }
    .btn-add { background: #28a745; color: white; }
    .checkbox-cell { width: 50px; text-align: center; }
  </style>
</head>
<body>

<h1>üìö Books Collection - Mi Biblioteca</h1>

{% if books|length > 0 %}
  <form method="POST" action="{{ url_for('bulk_action') }}" id="books-form">

    <table>
      <thead>
        <tr>
          <th class="checkbox-cell"><input type="checkbox" id="select-all" /></th>
          <th>Title</th>
          <th>Author</th>
          <th>Rating</th>
        </tr>
      </thead>
      <tbody>
        {% for book in books %}
        <tr>
          <td class="checkbox-cell">
            <input type="checkbox" name="book_ids" value="{{ book.id }}" />
          </td>
          <td>{{ book.title }}</td>
          <td>{{ book.author }}</td>
          <td>{{ "%.1f"|format(book.rating) }}/10 ‚≠ê</td>
        </tr>
        {% endfor %}
      </tbody>
    </table>

    <!-- Colombian-style buttons -->
    <button type="submit" name="action" value="edit" class="btn btn-edit">
      ‚úèÔ∏è ¬°Update la Vaina!
    </button>
    <button type="submit" name="action" value="delete" class="btn btn-delete" onclick="return confirm('Are you sure you want to delete those books? ¬°No hay vuelta atr√°s!')">
      üóëÔ∏è ¬°Borrar esos Books!
    </button>

  </form>
{% else %}
  <p>üìñ The library is empty!... A leer m√°s!</p>
{% endif %}

<!-- Add new book -->
<form action="{{ url_for('add_book') }}">
  <button type="submit" class="btn btn-add">‚ûï A√±adir un Libro Nuevo</button>
</form>

<script>
// Select/deselect all checkboxes
document.getElementById('select-all').onclick = function() {
  const checkboxes = document.querySelectorAll('input[name="book_ids"]');
  checkboxes.forEach(cb => cb.checked = this.checked);
};
</script>

</body>
</html>